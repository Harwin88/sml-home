<div class="modal-backdrop" (click)="onBackdropClick($event)">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">
        <mat-icon>work</mat-icon>
        Trabaja con nosotros
      </h2>
      <button 
        class="modal-close-btn" 
        (click)="closeModal()" 
        aria-label="Cerrar"
        [disabled]="isSubmitting">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    
    <div class="modal-body">
      <div *ngIf="submitSuccess" class="success-message">
        <mat-icon class="success-icon">check_circle</mat-icon>
        <p>¡Formulario enviado exitosamente! Nos pondremos en contacto contigo pronto.</p>
      </div>

      <form [formGroup]="formGroup" (ngSubmit)="onSubmit()" *ngIf="!submitSuccess">
        <div class="form-group">
          <label for="formType" class="form-label">
            Tipo de formulario <span class="required">*</span>
          </label>
          <select 
            id="formType" 
            formControlName="formType" 
            class="form-control"
            [class.error]="hasError('formType')">
            <option *ngFor="let type of formTypes" [value]="type.value">
              {{ type.label }}
            </option>
          </select>
          <span class="error-message" *ngIf="hasError('formType')">
            {{ getFieldError('formType') }}
          </span>
        </div>

        <div class="form-group">
          <label for="name" class="form-label">
            Nombre completo <span class="required">*</span>
          </label>
          <input 
            type="text" 
            id="name" 
            formControlName="name" 
            class="form-control"
            [class.error]="hasError('name')"
            placeholder="Ingresa tu nombre completo">
          <span class="error-message" *ngIf="hasError('name')">
            {{ getFieldError('name') }}
          </span>
        </div>

        <div class="form-group">
          <label for="email" class="form-label">
            Email <span class="required">*</span>
          </label>
          <input 
            type="email" 
            id="email" 
            formControlName="email" 
            class="form-control"
            [class.error]="hasError('email')"
            placeholder="tu@email.com">
          <span class="error-message" *ngIf="hasError('email')">
            {{ getFieldError('email') }}
          </span>
        </div>

        <div class="form-group">
          <label for="phone" class="form-label">
            Teléfono
          </label>
          <input 
            type="tel" 
            id="phone" 
            formControlName="phone" 
            class="form-control"
            placeholder="+57 3126701425">
        </div>

        <div class="form-group">
          <label for="subject" class="form-label">
            Asunto
          </label>
          <input 
            type="text" 
            id="subject" 
            formControlName="subject" 
            class="form-control"
            placeholder="Breve descripción del asunto">
        </div>

        <div class="form-group">
          <label for="message" class="form-label">
            Mensaje <span class="required">*</span>
          </label>
          <textarea 
            id="message" 
            formControlName="message" 
            class="form-control form-textarea"
            [class.error]="hasError('message')"
            rows="5"
            placeholder="Cuéntanos sobre ti y por qué te gustaría trabajar con nosotros..."></textarea>
          <span class="error-message" *ngIf="hasError('message')">
            {{ getFieldError('message') }}
          </span>
        </div>

        <div class="error-alert" *ngIf="submitError">
          <mat-icon class="error-icon">warning</mat-icon>
          <span>{{ submitError }}</span>
        </div>
      </form>
    </div>
    
    <div class="modal-footer" *ngIf="!submitSuccess">
      <button 
        type="button" 
        class="modal-cancel-btn" 
        (click)="closeModal()"
        [disabled]="isSubmitting">
        Cancelar
      </button>
      <button 
        type="submit" 
        class="modal-submit-btn" 
        (click)="onSubmit()"
        [disabled]="isSubmitting || formGroup.invalid">
        <span *ngIf="!isSubmitting">Enviar</span>
        <span *ngIf="isSubmitting" class="loading-spinner">
          <mat-icon>hourglass_empty</mat-icon>
          Enviando...
        </span>
      </button>
    </div>
  </div>
</div>

